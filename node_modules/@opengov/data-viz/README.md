# data-viz

Functional React SVG visualizations with d3 data helpers.

## Rational

SVG is a DOM.  HTML is a DOM.  They should be interacted with in the same manner.

A Data Visualization can be minimal like a sparkline or full on like data explorer.
This library aims to allow either without compromises but also without opinions.
Composition is the key.  It's easier to compose components than to configure them.

## Getting Started

* `nvm use`
* `yarn install`
* `yarn storybook`
* point browser at http://localhost:9001/

## StoryBook

When running storybook we suggest putting the Addon panel on the right side. `⌘ ⇧ G` / `⌃ ⇧ G`  The SVGs will fill their container but the storybook container is an iframe which isn't
affected by the height of the Addon panel.  This makes it look like the visualizations don't
conform to their containers.

## TODO!

These are things that need to happen before we can release this

### junk drawer

* build target for Inferno ( really want but don't actually need )
* docs!
* build/travis stuff

### solution needed
* columnar bar chart ( variant of stacked bar )
* tooltip edge detection orientation
* axis 45 deg transform based on threshold

## Run!

There are various scripts in `package.json`.  Run these via `yarn [command]`.

* install - install all dependencies
* build:dist - build all packages for publishing
* test - run the tests
* test:watch - run the tests and watch for changes
* storybook - see the code in action
* tableflip | clean - remove all dependencies
* outdated
* lint | lint all the TypeScript

## Nomenclature

`category`

`domain`

`assessor`

`component`

## Design

The overall goal of this library is to provide useable visualizations.  Useable
by the end user and the developer alike.  The means is provided by composable
components.  The APIs are collections of compositions.

This library provides you with all the primitives needed to build a visualization of
any complexity.

Transformations are in `/data`.  They make no assumptions about how or where you
transform your data.

Components are in `/components`.  They are the building blocks.

Look in `/examples` for... wait for it... examples. Also look at `/stories` for
complex examples and a narrow view of how to separate data transformation from
component props.

## Components

The heart of all visualizations is the `svg` tag represented by the `Svg` component.

```javascript
const Svg = ({ id,
               width,
               height,
               coordinateSystem,
               className,
               children }) => {
```

Only `coordinateSystem` and `children` are required.  `width` and `height` are
exposed but their use is discouraged.  An SVG will fill its container using the
aspect ratio of width to height defined in the `coordinateSystem`.  Use the
browser's layout system not javascript to make a responsive visualization.

All the graphs utilize Mike Bostock's [Margin Convention](https://bl.ocks.org/mbostock/3019563)

## CSS

This library uses css-modules for isolation and type safety.  The general pattern is to default
the css-module in the props and export the type and implementation details.  Higher Order
Components will compose various child css-modules into a map comprised of a key per css-module.

```javascript
import { sortStyle, lineStyle } from '../components';

export interface IAreaStyle {
  line: ILineStyle,
  sort: ISortStyle
}

export const defaultAreaStyle = {
  sort: sortStyle,
  line: lineStyle
}

export const Area: React.SFC<IArea<IAreaData>> = ({
  style = defaultAreaStyle,
```

You could then:

```javascript

import { Area, defaultAreaStyle } from './Area';

  const myStyle = Object.assign({}, defaultAreaStyle, { line: { line: 'foobar' } });

  return (
    <Area {...props} style={myStyle} />
  );
```

## Publishing

* `yarn clean`
* `yarn install`
* `yarn build:dist`
* `yarn publish`

## Contributing

See [CONTRIBUTING.md](CONTRIBUTING.md)

## License

`data-viz` is MIT licensed.

See [LICENSE.md](LICENSE.md) for details.
